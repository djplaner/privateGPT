<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Testing the Lucimoo epub export book tool</title>
</head>
<body>
<h1><a href="https://djon.es/blog/2015/08/18/testing-the-lucimoo-epub-export-book-tool/">Testing the Lucimoo epub export book tool</a></h1>

<p>Tags: moodle, moodleopenbook</p>

<p>There's movement afoot. The <a href="https://moodle.org/plugins/view/booktool_exportepub">Lucimoo epub export tool</a> for the <a href="https://docs.moodle.org/28/en/Book_module">Moodle book module</a> is going through the process of being tested (and perhaps installed) on my institution's main Moodle instance. What follows is a bit of testing of that tool in the institution's test environment.

Verdict: all works, a few changes to practice to leverage it properly.

<h3>Import a few books</h3>

First step is to import a few books into the bare course site within the test environment. Just a few random books from my main course. Something that's much easier now that @jonof helped identify <a href="https://davidtjones.wordpress.com/2015/07/18/import-and-the-book-module-a-case-of-knowledge-loss/">some lost knowledge</a> (and my oversight/mistake).

Of course it is never perfect.  The default setting on the test environment is to use the gui editor. Which removes links to CSS files. <strong>Which is a real pain</strong>.

<h3>Doing an export</h3>

Once in the book select the administration/settings block and hey presto, there's the option to "Download as ebook"

<a href="https://www.flickr.com/photos/david_jones/20479389760/in/dateposted-public/" title="export"><img alt="export" height="500" src="https://farm1.staticflickr.com/777/20479389760_4d6d9c16b5.jpg" width="327" /></a>

Select that option and I get the option to download the ePub file or view it in iBooks.

As <a href="https://davidtjones.wordpress.com/2015/06/15/importexport-epubs-into-the-moodle-book-module/">reported earlier</a> the ePub contains a few errors because apparently the original HTML content in my Book resource doesn't always meet ePub's stricter requirements.  The bugs I had to fix included
<ul>
  <li> Missing ending tag for an image (produced by ImageCodr)
        Of course it appears that the over-reaching default HTML editor in Moodle is automatically removing the /&gt; I'm putting at the end of the &lt;&lt;img tag.  I&#039;ve had to change my preference to the plain text area to get that fixed.

        God I hate tools that assume they know better than I what I want to do and won&#039;t let me override their assumptions.
  </li>
  <li> It appears that it doesn't like the nbsp entity either.
        There appears to be some blather about this online, but I don't have the time to fix it. For now I'll remove the nbsp entities. </li>
  <li> "Opening and ending tag mismatch: br line 0 and div"
           Replace &lt;br&gt; with &lt;br /&gt; <p>And all this so far is largely in code auto-generated by ImageCodr</p></li>
  <li> "Opening and ending tag mismatch"
        An issue with the relationship between P and BLOCKQUOTE tags that I am somewhat lazy.  Yay, that's the first page.
  </li>
  <li> The spacing around the image isn't great. </li>
  <li> "Specification mandate value for attribute allowfullscreen"
          A YouTube embed that doesn't meet expectations. </li>
  <li> The videos don't show.
       There is a space for the embedded YouTube video, but it is empty. Will need to figure out a way to fix this. Especially in this test book, which has a lot of videos in it</li>
  <li> Missing styling.
        In this books I use a bit of CSS to style elements such as activities.  The ePub version is currently not showing that styling, though the "Print this book" version does.  Ahh, that's caused by the magical CSS chomping GUI editor.  Fixed.
</ul>

You can view the <a href="https://dl.dropboxusercontent.com/u/14025788/MoodleOpenBook/Examples_of_how_the_world_is_changing.epub">final ePub file</a> and also <a href="https://dl.dropboxusercontent.com/u/14025788/MoodleOpenBook/Examples%20of%20how%20the%20world%20is%20changing.pdf">a PDF</a> produced by "printing the book".

The layout of the PDF isn't great.  It does at least show some visual evidence of the videos. Though it's not very useful.

<h3>Test the Assessment book</h3>

Assessment is of course what is uppermost in the minds of students, so I should test that book.  I don't have that in my nice offline format, so will have to explore the how Moodle backup and restore process.

Again, a slightly different collection of HTML "strictness" problems.  Given the size of the assessment book, there are surprisingly few of them.

The major problem here is that my "macro" approach that relies on jQuery to update due dates and related information obviously won't work with ePub.  Wonder if the filter approach will work with the ePub export tool?

<h3>View the results on a mobile device</h3>

One of the main benefits of the ePub format is that it is supposed to play nicely with mobile devices. Hence testing the files on a mobile device (my phone) would be sensible.  Observation and problems include
<ul>
  <li> The Flickr image on the front page isn't showing up.  There is a link I can click on, but not embedded in the book. Wonder if that's a config option in ibooks? </li>
  <li> The CSS styling on tables for Assessment doesn't appear to work.
        It does in iBooks on the laptop, but not on the phone.  In much the same way that the images work on laptop, but not phone.
  </li>
  <li> Neither does the table of contents, actually that appears to be an issue with internal links being added into the ToC and some of these being incorrectly. </li>
</ul>

Problems to be explored at a later date, not show stoppers, just part of learning the details of a new ecosystem.</p>

</body>
</html>
